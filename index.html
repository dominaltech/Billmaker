<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quotation Generator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Segoe UI",Tahoma,sans-serif}
body{background:#f5f5f5;color:#222;padding:20px}
.container{max-width:1200px;margin:auto;background:#fff;box-shadow:0 0 10px rgba(0,0,0,0.1);padding:20px;border-radius:8px}
h1{text-align:center;margin-bottom:20px}
form{margin-bottom:30px}
label{display:block;margin:10px 0 5px;font-weight:600}
input[type="text"],input[type="number"],textarea{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px}
input[type="number"]{max-width:120px}
button{padding:10px 16px;margin:5px;border:none;border-radius:4px;cursor:pointer;font-weight:600}
button:hover{opacity:0.9}
#addServiceBtn{background:#36a420;color:#fff}
#updatePreviewBtn{background:#0073e6;color:#fff}
#downloadBtn{background:#e67300;color:#fff}
.service-row{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:10px;background:#fafafa;padding:10px;border-radius:6px}
.service-row input{flex:1;min-width:100px}
.service-row button{background:#cc0000;color:#fff}
.preview-container{border-top:2px solid #ccc;padding-top:20px;margin-top:30px}
#quotationPreview{padding:20px;background:#fff;width:100%;max-width:800px;margin:auto}
.quotation-header{text-align:center;border-bottom:2px solid #000;padding-bottom:10px;margin-bottom:20px;position:relative}
.quotation-header h2{font-size:28px;letter-spacing:2px}
.company-details{margin-bottom:10px;text-align:left}
.qr-code{position:absolute;right:0;top:10px}
.bill-to{margin-bottom:20px}
table{width:100%;border-collapse:collapse;margin-bottom:20px}
th,td{border:1px solid #ccc;padding:8px;text-align:left}
th{background:#f0f0f0}
tfoot td{font-weight:600}
.signature{margin-top:50px;text-align:right}
.note-section{margin-top:20px}
@media(max-width:768px){
.service-row{flex-direction:column}
th,td{font-size:14px}
}
@media print{
form,.hide-print{display:none}
body{background:#fff}
#quotationPreview{box-shadow:none;padding:0;margin:0;page-break-after:always}
}
</style>
</head>
<body>
<div class="container">
<h1>Quotation Generator</h1>
<form id="quotationForm">
<label>Client Name</label>
<input type="text" id="clientName" placeholder="Enter client name">

<label>Quotation Number</label>
<input type="text" id="quotationNumber">

<div id="servicesContainer">
<h3>Services</h3>
<div class="service-row">
<input type="text" placeholder="Service Name" class="serviceName" value="Requirement Gathering">
<input type="text" placeholder="Validity" class="validity" value="One Time">
<input type="number" placeholder="Quantity" class="quantity" value="1">
<input type="number" placeholder="Rate" class="rate" value="1000">
<button type="button" class="removeServiceBtn">Remove</button>
</div>
<div class="service-row">
<input type="text" placeholder="Service Name" class="serviceName" value="Hosting Setup">
<input type="text" placeholder="Validity" class="validity" value="1 year">
<input type="number" placeholder="Quantity" class="quantity" value="1">
<input type="number" placeholder="Rate" class="rate" value="2000">
<button type="button" class="removeServiceBtn">Remove</button>
</div>
<div class="service-row">
<input type="text" placeholder="Service Name" class="serviceName" value="Cloud Database Setup & Storage">
<input type="text" placeholder="Validity" class="validity" value="1 year">
<input type="number" placeholder="Quantity" class="quantity" value="1">
<input type="number" placeholder="Rate" class="rate" value="3000">
<button type="button" class="removeServiceBtn">Remove</button>
</div>
<div class="service-row">
<input type="text" placeholder="Service Name" class="serviceName" value="Web Structure UI/UX Design & Development">
<input type="text" placeholder="Validity" class="validity" value="1 year">
<input type="number" placeholder="Quantity" class="quantity" value="1">
<input type="number" placeholder="Rate" class="rate" value="3000">
<button type="button" class="removeServiceBtn">Remove</button>
</div>
<div class="service-row">
<input type="text" placeholder="Service Name" class="serviceName" value="Structured Support">
<input type="text" placeholder="Validity" class="validity" value="60 days">
<input type="number" placeholder="Quantity" class="quantity" value="1">
<input type="number" placeholder="Rate" class="rate" value="1500">
<button type="button" class="removeServiceBtn">Remove</button>
</div>
</div>

<button type="button" id="addServiceBtn">+ Add Service</button>

<label>Custom Note</label>
<textarea id="customNote" rows="4">Thank you for considering our quotation.
This quotation is valid for 15 days from the date of issue.
We look forward to building a long-term association.
For any clarification, please contact us at dominaltech@gmail.com.</textarea>

<button type="button" id="updatePreviewBtn">Update Preview</button>
<button type="button" id="downloadBtn">Download PDF</button>
</form>

<div class="preview-container">
<div id="quotationPreview">
<div class="quotation-header">
<div class="company-details">
<h2>Dominal Technologies</h2>
<p>
  <i class="fa-solid fa-phone"></i> +91-8766882442<br>
  <i class="fa-solid fa-globe"></i> https://dominal.in<br>
  <i class="fa-solid fa-envelope"></i> dominaltech@gmail.com<br>
  <i class="fa-solid fa-location-dot"></i> Solapur, Maharashtra, India
</p>
</div>
<div id="qrcode" class="qr-code"></div>
<h2>QUOTATION</h2>
</div>
<div class="bill-to">
<p><strong>Bill To:</strong> <span id="billToName"></span></p>
<p><strong>Quotation No:</strong> <span id="qNumber"></span></p>
<p><strong>Date:</strong> <span id="qDate"></span></p>
</div>
<table id="serviceTable">
<thead>
<tr>
<th>Service Description</th>
<th>Validity</th>
<th>Quantity</th>
<th>Amount (₹)</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
<td colspan="3" style="text-align:right">Grand Total (₹)</td>
<td id="grandTotal">0</td>
</tr>
</tfoot>
</table>
<div class="note-section">
<p><strong>Note:</strong></p>
<p id="noteText"></p>
</div>
<div class="signature">
<p>Authorized Signatory</p>
</div>
</div>
</div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
const quotationNumber=document.getElementById("quotationNumber");
quotationNumber.value="Q"+Date.now();
new QRCode(document.getElementById("qrcode"),{text:"https://dominal.in/",width:80,height:80});

document.getElementById("addServiceBtn").addEventListener("click",()=>{
const container=document.getElementById("servicesContainer");
const row=document.createElement("div");
row.className="service-row";
row.innerHTML=`
<input type="text" placeholder="Service Name" class="serviceName">
<input type="text" placeholder="Validity" class="validity">
<input type="number" placeholder="Quantity" class="quantity">
<input type="number" placeholder="Rate" class="rate">
<button type="button" class="removeServiceBtn">Remove</button>
`;
container.appendChild(row);
});

document.addEventListener("click",e=>{
if(e.target.classList.contains("removeServiceBtn")){
e.target.parentElement.remove();
}
});

document.getElementById("updatePreviewBtn").addEventListener("click",updatePreview);
document.getElementById("downloadBtn").addEventListener("click",downloadPDF);
updatePreview();
});

function updatePreview(){
const clientName=document.getElementById("clientName").value.trim();
const qNum=document.getElementById("quotationNumber").value.trim();
const note=document.getElementById("customNote").value.trim();
document.getElementById("billToName").innerText=clientName||"-";
document.getElementById("qNumber").innerText=qNum;
document.getElementById("qDate").innerText=new Date().toLocaleDateString("en-IN");
document.getElementById("noteText").innerText=note||"";

const tbody=document.querySelector("#serviceTable tbody");
tbody.innerHTML="";
let total=0;
document.querySelectorAll(".service-row").forEach(row=>{
const name=row.querySelector(".serviceName").value.trim();
const val=row.querySelector(".validity").value.trim();
const qty=parseFloat(row.querySelector(".quantity").value)||0;
const rate=parseFloat(row.querySelector(".rate").value)||0;
if(name!==""&&qty>0&&rate>0){
const amount=qty*rate;
total+=amount;
const tr=document.createElement("tr");
tr.innerHTML=`
<td>${name}</td>
<td>${val}</td>
<td>${qty}</td>
<td>${amount.toLocaleString("en-IN")}</td>
`;
tbody.appendChild(tr);
}
});
document.getElementById("grandTotal").innerText=total.toLocaleString("en-IN");
}

async function downloadPDF(){
updatePreview();
const {jsPDF}=window.jspdf;
const preview=document.getElementById("quotationPreview");
const canvas=await html2canvas(preview,{scale:2,scrollY:-window.scrollY});
const imgData=canvas.toDataURL("image/png");
const pdf=new jsPDF("p","pt","a4");
const pageWidth=pdf.internal.pageSize.getWidth();
const pageHeight=pdf.internal.pageSize.getHeight();
const imgWidth=pageWidth;
const imgHeight=canvas.height*imgWidth/canvas.width;
let heightLeft=imgHeight;
let position=0;
pdf.addImage(imgData,"PNG",0,position,imgWidth,imgHeight);
heightLeft-=pageHeight;
while(heightLeft>0){
position-=pageHeight;
pdf.addPage();
pdf.addImage(imgData,"PNG",0,position,imgWidth,imgHeight);
heightLeft-=pageHeight;
}
const clientName=document.getElementById("clientName").value.trim().replace(/\s+/g,"_")||"Client";
const dateStr=new Date().toLocaleDateString("en-IN").replace(/\//g,"-");
pdf.save(`Quotation_${clientName}_${dateStr}.pdf`);
}
</script>
</body>
</html>
